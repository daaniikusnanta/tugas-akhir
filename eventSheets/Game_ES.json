{
	"name": "Game_ES",
	"events": [
		{
			"eventType": "include",
			"includeSheet": "Common_ES"
		},
		{
			"eventType": "variable",
			"name": "maxTickRate",
			"type": "number",
			"initialValue": "48",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 522719707869439
		},
		{
			"eventType": "variable",
			"name": "minTickRate",
			"type": "number",
			"initialValue": "6",
			"comment": "",
			"isStatic": false,
			"isConstant": true,
			"sid": 369444187233159
		},
		{
			"eventType": "variable",
			"name": "tickRate",
			"type": "number",
			"initialValue": "1",
			"comment": "The tick",
			"isStatic": false,
			"isConstant": false,
			"sid": 450634544757407
		},
		{
			"eventType": "variable",
			"name": "day",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 920261971858448
		},
		{
			"eventType": "variable",
			"name": "isRunning",
			"type": "boolean",
			"initialValue": "false",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 775536544835369
		},
		{
			"eventType": "variable",
			"name": "incomeBubbleInterval",
			"type": "number",
			"initialValue": "0",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 399637249757839
		},
		{
			"eventType": "variable",
			"name": "policyToSet",
			"type": "string",
			"initialValue": "",
			"comment": "",
			"isStatic": false,
			"isConstant": false,
			"sid": 639483971555850
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "Game",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 518602592043125
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "UIText",
							"sid": 394858760684714,
							"parameters": {
								"instance-variable": "id",
								"comparison": 0,
								"value": "\"cycle_speed\""
							}
						}
					],
					"actions": [
						{
							"callFunction": "setupMap",
							"sid": 298997681691886
						},
						{
							"type": "script",
							"script": "resetLevelVariables();"
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 534222910910837,
							"parameters": {
								"layer": "\"GameLoading\"",
								"visibility": "visible"
							}
						},
						{
							"id": "set-layer-interactive",
							"objectClass": "System",
							"sid": 445764072744184,
							"parameters": {
								"layer": "\"GameLoading\"",
								"interactive": true
							}
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 474861057360251,
							"parameters": {
								"layer": "\"PausedPopUp\"",
								"visibility": "invisible"
							}
						},
						{
							"id": "set-layer-interactive",
							"objectClass": "System",
							"sid": 572137777242716,
							"parameters": {
								"layer": "\"PausedPopUp\"",
								"interactive": false
							}
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 561609636927821,
							"parameters": {
								"layer": "\"GameOver\"",
								"visibility": "invisible"
							}
						},
						{
							"id": "set-layer-interactive",
							"objectClass": "System",
							"sid": 423649973338115,
							"parameters": {
								"layer": "\"GameOver\"",
								"interactive": false
							}
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 703360565323551,
							"parameters": {
								"layer": "\"FiscalPopUp\"",
								"visibility": "invisible"
							}
						},
						{
							"id": "set-layer-interactive",
							"objectClass": "System",
							"sid": 814863109307968,
							"parameters": {
								"layer": "\"FiscalPopUp\"",
								"interactive": false
							}
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 468363061303768,
							"parameters": {
								"layer": "\"CrisisPopUp\"",
								"visibility": "invisible"
							}
						},
						{
							"id": "set-layer-interactive",
							"objectClass": "System",
							"sid": 173678353836040,
							"parameters": {
								"layer": "\"CrisisPopUp\"",
								"interactive": false
							}
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 160374345363527,
							"parameters": {
								"layer": "\"StatusPopUp\"",
								"visibility": "invisible"
							}
						},
						{
							"id": "set-layer-interactive",
							"objectClass": "System",
							"sid": 284122948236864,
							"parameters": {
								"layer": "\"StatusPopUp\"",
								"interactive": false
							}
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 602560635260893,
							"parameters": {
								"layer": "\"PolicyPopUp\"",
								"visibility": "invisible"
							}
						},
						{
							"id": "set-layer-interactive",
							"objectClass": "System",
							"sid": 760870497841144,
							"parameters": {
								"layer": "\"PolicyPopUp\"",
								"interactive": false
							}
						},
						{
							"type": "script",
							"script": "setupPolicyMultiplier();\ninitializePolicyViews(runtime);\ninitializeStatusViews(runtime);\ncreatePolicyEffectViews(runtime);\nsetLevelVariables(0, runtime);\nsetupCrisisViews(runtime);\nupdateStatusView(runtime);\nupdateCrisisView(runtime);\ninitializeTileBiome(runtime);\ninitializeFiscalData(runtime);\nupdateFiscal(runtime);\nupdateStatusView(runtime);\nupdateFSM();"
						},
						{
							"callFunction": "SetupClickablePanels",
							"sid": 658224677021982
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 611279084989323,
							"parameters": {
								"name": "BUTTON_CLICKED",
								"string": "LayoutName",
								"function": "MenuButtonClicked"
							}
						},
						{
							"id": "map-function",
							"objectClass": "Functions",
							"sid": 137783170310731,
							"parameters": {
								"name": "PANEL_CLICKED",
								"string": "LayoutName",
								"function": "UIPanelClicked"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 946016917011127,
							"parameters": {
								"variable": "tickRate",
								"value": "1"
							}
						},
						{
							"id": "set-text",
							"objectClass": "UIText",
							"sid": 656123195604483,
							"parameters": {
								"text": "24 / tickRate & \" x\""
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 160119778913016,
							"parameters": {
								"variable": "day",
								"value": "0"
							}
						},
						{
							"id": "start-timer",
							"objectClass": "GameManager",
							"sid": 405763387673053,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "tickRate",
								"type": "regular",
								"tag": "\"Tick\""
							}
						},
						{
							"type": "script",
							"script": "const gameManager = runtime.objects.GameManager.getAllInstances()[0];\nconst timer = gameManager.behaviors.Timer;\nconsole.log(\"incomes \", incomes);\nruntime.globalVars.incomeBubbleInterval = timer.getDuration(\"Tick\") / Object.keys(incomes).length;"
						},
						{
							"id": "start-timer",
							"objectClass": "GameManager",
							"sid": 136985271116290,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "incomeBubbleInterval",
								"type": "regular",
								"tag": "\"IncomeBubble\""
							}
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 107239479664738,
							"parameters": {
								"variable": "isRunning",
								"value": "false"
							}
						},
						{
							"id": "octaves",
							"objectClass": "AdvancedRandom",
							"sid": 745515024942395,
							"parameters": {
								"count": "4"
							}
						},
						{
							"callFunction": "exportMap",
							"sid": 503621720548741,
							"disabled": true
						},
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 932680271310093,
							"parameters": {
								"type": "log",
								"message": "LayoutName"
							}
						}
					],
					"sid": 982971445756731
				},
				{
					"functionName": "exportMap",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-size",
							"objectClass": "MapData",
							"sid": 134720710023521,
							"parameters": {
								"width": "TilemapBiome.MapDisplayWidth",
								"height": "TilemapBiome.MapDisplayHeight",
								"depth": "1"
							}
						}
					],
					"sid": 701397690828887,
					"children": [
						{
							"eventType": "variable",
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 911718186700845
						},
						{
							"eventType": "variable",
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 979339662364868
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "repeat",
									"objectClass": "System",
									"sid": 645279876061624,
									"parameters": {
										"count": "TilemapBiome.MapDisplayWidth"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 608848155800910,
									"parameters": {
										"variable": "x",
										"value": "loopindex"
									}
								}
							],
							"sid": 393163702976724,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "repeat",
											"objectClass": "System",
											"sid": 117902254483472,
											"parameters": {
												"count": "TilemapBiome.MapDisplayHeight"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 656391717768652,
											"parameters": {
												"variable": "y",
												"value": "loopindex"
											}
										},
										{
											"id": "set-at-xy",
											"objectClass": "MapData",
											"sid": 962825688747024,
											"parameters": {
												"x": "x",
												"y": "y",
												"value": "clamp(TilemapBiome.TileAt(x, y), 0, 1)"
											}
										}
									],
									"sid": 199711721000196
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "download",
									"objectClass": "MapData",
									"sid": 154498151246714,
									"parameters": {
										"filename": "\"sepnovria_data.json\""
									}
								}
							],
							"sid": 384885400030191
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-tap-object",
							"objectClass": "Touch",
							"sid": 494113314069778,
							"parameters": {
								"object": "IncomeBubble"
							}
						}
					],
					"actions": [
						{
							"type": "script",
							"script": "const bubble = runtime.objects.IncomeBubble.getPickedInstances()[0];\nconsole.log(\"tap \", bubble);\n\naddBalance(bubble.instVars['incomeValue']);"
						},
						{
							"id": "destroy",
							"objectClass": "IncomeBubble",
							"sid": 964599582514506
						}
					],
					"sid": 277497560437552
				},
				{
					"functionName": "updateIncomeBubbles",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 310449305175434,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "System",
									"sid": 188566695777730,
									"parameters": {
										"object": "IncomeBubble"
									}
								}
							],
							"actions": [],
							"sid": 956959333145604,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "IncomeBubble",
											"sid": 534640594437473,
											"parameters": {
												"instance-variable": "currentDuration",
												"comparison": 5,
												"value": "1"
											}
										}
									],
									"actions": [
										{
											"id": "set-opacity",
											"objectClass": "IncomeBubble",
											"sid": 270998749821260,
											"parameters": {
												"opacity": "IncomeBubble.Opacity - 30"
											}
										},
										{
											"id": "log",
											"objectClass": "Browser",
											"sid": 599693737957494,
											"disabled": true,
											"parameters": {
												"type": "log",
												"message": "\"opacity \" & IncomeBubble.currentDuration & \" \" & IncomeBubble.Opacity"
											}
										}
									],
									"sid": 845038686460410
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-instance-variable",
											"objectClass": "IncomeBubble",
											"sid": 874861576141627,
											"parameters": {
												"instance-variable": "currentDuration",
												"comparison": 0,
												"value": "IncomeBubble.duration"
											}
										}
									],
									"actions": [
										{
											"type": "script",
											"script": "const incomeBubble = runtime.objects.IncomeBubble.getPickedInstances()[0];\nremoveIncomeBubbleTileIndex(incomeBubble.instVars['tileIndex']);"
										},
										{
											"id": "destroy",
											"objectClass": "IncomeBubble",
											"sid": 671625955071018
										}
									],
									"sid": 867198062629060
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 983881740892752
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "IncomeBubble",
											"sid": 106122958587833,
											"parameters": {
												"instance-variable": "currentDuration",
												"value": "IncomeBubble.currentDuration + 1"
											}
										}
									],
									"sid": 450146723451039
								}
							]
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "GameManager",
							"sid": 329903742573966,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"Tick\""
							}
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 633931395600657,
							"parameters": {
								"variable": "isRunning"
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 850864639808578,
							"parameters": {
								"variable": "day",
								"value": "Day + 1"
							}
						},
						{
							"type": "script",
							"script": "updateFiscal(runtime);\nupdateAllStatus(runtime);\nupdateAllCrisis(runtime);\nupdateAllPolicies(runtime);\nupdateFSM();\nupdateStatusView(runtime);\nupdateCrisisView(runtime);\ncheckGameOverCondition(runtime);"
						},
						{
							"type": "script",
							"script": "const gameManager = runtime.objects.GameManager.getPickedInstances()[0];\nconst timer = gameManager.behaviors.Timer;\nruntime.globalVars.incomeBubbleInterval = timer.getDuration(\"Tick\") / Object.keys(incomes).length;"
						},
						{
							"callFunction": "updateIncomeBubbles",
							"sid": 454474890206175
						},
						{
							"id": "start-timer",
							"objectClass": "GameManager",
							"sid": 665049530398781,
							"behaviorType": "Timer",
							"parameters": {
								"duration": "incomeBubbleInterval",
								"type": "regular",
								"tag": "\"IncomeBubble\""
							}
						}
					],
					"sid": 268964243012299,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 338274129188735,
									"parameters": {
										"first-value": "GameManager.Timer.Duration(\"Tick\")",
										"comparison": 1,
										"second-value": "tickRate"
									}
								}
							],
							"actions": [
								{
									"id": "start-timer",
									"objectClass": "GameManager",
									"sid": 372769231226637,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "tickRate",
										"type": "regular",
										"tag": "\"Tick\""
									}
								}
							],
							"sid": 460886259768926
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "UIText",
									"sid": 891357014194865,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"day\""
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "UIText",
									"sid": 305458660855761,
									"parameters": {
										"text": "\"Day \" & day"
									}
								}
							],
							"sid": 237452852588075
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-timer",
							"objectClass": "GameManager",
							"sid": 504545210687120,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"IncomeBubble\""
							}
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 241508110419819,
							"parameters": {
								"variable": "isRunning"
							}
						}
					],
					"actions": [
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 214173328679598,
							"disabled": true,
							"parameters": {
								"type": "log",
								"message": "\"Spawn \" & GameManager.Timer.CurrentTime(\"Tick\")"
							}
						},
						{
							"type": "script",
							"script": "spawnIncomeBubble(runtime);"
						}
					],
					"sid": 634990383427835,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "is-timer-running",
									"objectClass": "GameManager",
									"sid": 136564265359688,
									"behaviorType": "Timer",
									"parameters": {
										"tag": "\"Tick\""
									}
								},
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 939463150750346,
									"parameters": {
										"first-value": "GameManager.Timer.Duration(\"Tick\") -GameManager.Timer.CurrentTime(\"Tick\") + 0.2",
										"comparison": 4,
										"second-value": "GameManager.Timer.Duration(\"IncomeBubble\")"
									}
								}
							],
							"actions": [
								{
									"id": "log",
									"objectClass": "Browser",
									"sid": 688266687092223,
									"disabled": true,
									"parameters": {
										"type": "log",
										"message": "\"Start \" & GameManager.Timer.Duration(\"Tick\") -GameManager.Timer.CurrentTime(\"Tick\") + 0.2"
									}
								},
								{
									"id": "start-timer",
									"objectClass": "GameManager",
									"sid": 979638145727554,
									"behaviorType": "Timer",
									"parameters": {
										"duration": "incomeBubbleInterval",
										"type": "regular",
										"tag": "\"IncomeBubble\""
									}
								}
							],
							"sid": 152506535759969
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "every-tick",
							"objectClass": "System",
							"sid": 626888163548503
						},
						{
							"id": "is-timer-running",
							"objectClass": "GameManager",
							"sid": 634296862353963,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"Tick\""
							}
						},
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 810764528947928,
							"parameters": {
								"variable": "isRunning"
							}
						}
					],
					"actions": [
						{
							"type": "script",
							"script": "const gameManager = runtime.objects.GameManager.getPickedInstances()[0];\n\nsetupSpawnIncomeBubble(gameManager);",
							"disabled": true
						}
					],
					"sid": 448996669788675,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "ProgressBar",
									"sid": 121151850740434,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"day\""
									}
								}
							],
							"actions": [
								{
									"id": "set-width",
									"objectClass": "ProgressBar",
									"sid": 324599643043710,
									"parameters": {
										"width": "clamp(GameManager.Timer.CurrentTime(\"Tick\")/GameManager.Timer.Duration(\"Tick\")*Self.maxWidth, Self.minWidth, Self.maxWidth)"
									}
								}
							],
							"sid": 279920406147001
						}
					]
				},
				{
					"functionName": "slowTime",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 583138391794107,
							"parameters": {
								"first-value": "int(tickRate * 2)",
								"comparison": 3,
								"second-value": "maxTickRate"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "UIText",
							"sid": 878313735539530,
							"parameters": {
								"instance-variable": "id",
								"comparison": 0,
								"value": "\"cycle_speed\""
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 689801769405162,
							"parameters": {
								"variable": "tickRate",
								"value": "int(tickRate * 2)"
							}
						},
						{
							"id": "set-text",
							"objectClass": "UIText",
							"sid": 445840527564131,
							"parameters": {
								"text": "24 / tickRate & \" x\""
							}
						}
					],
					"sid": 628096607327336
				},
				{
					"functionName": "accelerateTime",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 468250506902629,
							"parameters": {
								"first-value": "int(tickRate / 2)",
								"comparison": 5,
								"second-value": "minTickRate"
							}
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "UIText",
							"sid": 382567339907783,
							"parameters": {
								"instance-variable": "id",
								"comparison": 0,
								"value": "\"cycle_speed\""
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 910927853349236,
							"parameters": {
								"variable": "tickRate",
								"value": "int(tickRate / 2)"
							}
						},
						{
							"id": "set-text",
							"objectClass": "UIText",
							"sid": 321831522001133,
							"parameters": {
								"text": "24 / tickRate & \" x\""
							}
						}
					],
					"sid": 569985367823576
				},
				{
					"functionName": "pauseGame",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "pause-resume-timer",
							"objectClass": "GameManager",
							"sid": 136475179817901,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"Tick\"",
								"state": "paused"
							}
						},
						{
							"id": "pause-resume-timer",
							"objectClass": "GameManager",
							"sid": 718459516270190,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"IncomeBubble\"",
								"state": "paused"
							}
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 916368064369798,
							"parameters": {
								"variable": "isRunning",
								"value": "false"
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "ProgressBar",
							"sid": 608031733632259,
							"parameters": {
								"mode": "enable",
								"effect": "\"SetColor\""
							}
						}
					],
					"sid": 898201404151506
				},
				{
					"functionName": "resumeGame",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "pause-resume-timer",
							"objectClass": "GameManager",
							"sid": 413037312651356,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"Tick\"",
								"state": "resumed"
							}
						},
						{
							"id": "pause-resume-timer",
							"objectClass": "GameManager",
							"sid": 643066311574698,
							"behaviorType": "Timer",
							"parameters": {
								"tag": "\"IncomeBubble\"",
								"state": "resumed"
							}
						},
						{
							"id": "set-boolean-eventvar",
							"objectClass": "System",
							"sid": 414593946723454,
							"parameters": {
								"variable": "isRunning",
								"value": "true"
							}
						},
						{
							"id": "set-effect-enabled",
							"objectClass": "ProgressBar",
							"sid": 553321342387628,
							"parameters": {
								"mode": "disable",
								"effect": "\"SetColor\""
							}
						}
					],
					"sid": 102313444406747
				},
				{
					"functionName": "restartGame",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "restart-layout",
							"objectClass": "System",
							"sid": 852091058026441
						}
					],
					"sid": 233907640050933
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-touch-start",
							"objectClass": "Touch",
							"sid": 601816801057799
						},
						{
							"id": "cursor-is-over-object",
							"objectClass": "Mouse",
							"sid": 989134782895765,
							"parameters": {
								"object": "Panel"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"callFunction": "showStatusPanel",
							"sid": 737463637766291,
							"parameters": [
								"\"\"",
								false
							]
						},
						{
							"callFunction": "showCrisisPanel",
							"sid": 346275711024862,
							"parameters": [
								false
							]
						},
						{
							"callFunction": "showPolicyPanel",
							"sid": 149286169464735,
							"parameters": [
								"\"\"",
								false
							]
						}
					],
					"sid": 192436697156279
				},
				{
					"functionName": "MenuButtonClicked",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "uid",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 767861210822662
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "Button",
							"sid": 206711813583698,
							"parameters": {
								"unique-id": "uid"
							}
						}
					],
					"actions": [
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 462718097224942,
							"parameters": {
								"type": "log",
								"message": "\"clicked \" & Button.id"
							}
						}
					],
					"sid": 491295315472353,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 779711647550519,
									"parameters": {
										"first-value": "RegexMatchCount(Button.id, \"status$\", \"\")",
										"comparison": 0,
										"second-value": "1"
									}
								}
							],
							"actions": [
								{
									"callFunction": "showStatusPanel",
									"sid": 345683510508793,
									"parameters": [
										"tokenat(Button.id, 0, \"_\")",
										true
									]
								}
							],
							"sid": 627493602582896
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 250346897375924,
									"parameters": {
										"first-value": "RegexMatchCount(Button.id, \"policy$\", \"\")",
										"comparison": 0,
										"second-value": "1"
									}
								}
							],
							"actions": [
								{
									"callFunction": "showPolicyPanel",
									"sid": 159744151605400,
									"parameters": [
										"tokenat(Button.id, 0, \"_\")",
										true
									]
								}
							],
							"sid": 200290971298159
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Button",
									"sid": 674525453037274,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"crisis\""
									}
								}
							],
							"actions": [
								{
									"id": "log",
									"objectClass": "Browser",
									"sid": 819533039404231,
									"parameters": {
										"type": "log",
										"message": "\"btncrisis\""
									}
								}
							],
							"sid": 392998340683190,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "layer-is-visible",
											"objectClass": "System",
											"sid": 346039741769986,
											"parameters": {
												"layer": "\"PanelCrisis\""
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"callFunction": "showCrisisPanel",
											"sid": 537185157392160,
											"parameters": [
												true
											]
										}
									],
									"sid": 887790517699090
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 237114112509398
										}
									],
									"actions": [
										{
											"callFunction": "showCrisisPanel",
											"sid": 665675379860426,
											"parameters": [
												false
											]
										}
									],
									"sid": 219119583243453
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Button",
									"sid": 370776902774895,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"policy_pop_up_cancel\""
									}
								}
							],
							"actions": [
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 651210894824282,
									"parameters": {
										"layer": "\"UI\"",
										"interactive": true
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 270429182703778,
									"parameters": {
										"layer": "\"Background\"",
										"interactive": true
									}
								},
								{
									"callFunction": "resumeGame",
									"sid": 731958649951407
								},
								{
									"callFunction": "showPolicyPopUp",
									"sid": 990537249048881,
									"parameters": [
										"\"\"",
										false
									]
								}
							],
							"sid": 237507252989424
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Button",
									"sid": 473736481221535,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"policy_pop_up_activate\""
									}
								}
							],
							"actions": [
								{
									"type": "script",
									"script": "togglePolicyActive(runtime.globalVars.policyToSet, runtime);"
								}
							],
							"sid": 989542470949533
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Button",
									"sid": 799799022137702,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"policy_pop_up_apply\""
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 819224740265340,
									"parameters": {
										"variable": "policyToSet",
										"comparison": 1,
										"value": "\"\""
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Slider",
									"sid": 991030584785036,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"policy_pop_up_slider\""
									}
								}
							],
							"actions": [
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 528971214959198,
									"parameters": {
										"layer": "\"UI\"",
										"interactive": true
									}
								},
								{
									"type": "script",
									"script": "const policySlider = runtime.objects.Slider.getPickedInstances()[0];\napplyPolicyChange(runtime.globalVars.policyToSet, policySlider.instVars['value']);"
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 261540939581523,
									"parameters": {
										"layer": "\"Background\"",
										"interactive": true
									}
								},
								{
									"callFunction": "resumeGame",
									"sid": 138687408890687
								},
								{
									"callFunction": "showPolicyPopUp",
									"sid": 981055359000690,
									"parameters": [
										"\"\"",
										false
									]
								}
							],
							"sid": 695490178969382
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Button",
									"sid": 609087408736789,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"status_pop_up_close\""
									}
								}
							],
							"actions": [
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 785363731883158,
									"parameters": {
										"layer": "\"UI\"",
										"interactive": true
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 984616086393439,
									"parameters": {
										"layer": "\"Background\"",
										"interactive": true
									}
								},
								{
									"callFunction": "resumeGame",
									"sid": 933647060519720
								},
								{
									"callFunction": "showStatusPopUp",
									"sid": 450282510955590,
									"parameters": [
										"\"\"",
										false
									]
								}
							],
							"sid": 369958728711919
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Button",
									"sid": 903061653461072,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"crisis_pop_up_close\""
									}
								}
							],
							"actions": [
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 917600463368423,
									"parameters": {
										"layer": "\"UI\"",
										"interactive": true
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 368599244907626,
									"parameters": {
										"layer": "\"Background\"",
										"interactive": true
									}
								},
								{
									"callFunction": "resumeGame",
									"sid": 157404848268773
								},
								{
									"callFunction": "showCrisisPopUp",
									"sid": 587878883023581,
									"parameters": [
										"\"\"",
										false
									]
								}
							],
							"sid": 304519710343957
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Button",
									"sid": 222673508393963,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"fiscal_pop_up_close\""
									}
								}
							],
							"actions": [
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 579622131400555,
									"parameters": {
										"layer": "\"UI\"",
										"interactive": true
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 660631103355540,
									"parameters": {
										"layer": "\"Background\"",
										"interactive": true
									}
								},
								{
									"callFunction": "resumeGame",
									"sid": 417816424442732
								},
								{
									"callFunction": "showFiscalPopUp",
									"sid": 784714530911470,
									"parameters": [
										false
									]
								}
							],
							"sid": 660920370769553
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Button",
									"sid": 323381484528961,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"exit\""
									}
								}
							],
							"actions": [
								{
									"id": "go-to-layout",
									"objectClass": "System",
									"sid": 562014007138935,
									"parameters": {
										"layout": "MenuLayout"
									}
								}
							],
							"sid": 796899480010799
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Button",
									"sid": 289949987404035,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"retry\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "restartGame",
									"sid": 452326377580244
								}
							],
							"sid": 264555549840413
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Button",
									"sid": 358293186483515,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"paused_resume\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "showPausedPopUp",
									"sid": 596034319791337,
									"parameters": [
										false
									]
								}
							],
							"sid": 289284567717754
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Button",
									"sid": 995705573835466,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"paused\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "showPausedPopUp",
									"sid": 536187210697321,
									"parameters": [
										true
									]
								}
							],
							"sid": 502696191881052
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Button",
									"sid": 799564687341402,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"help\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "showTutorialPopUp",
									"sid": 189505048942838,
									"parameters": [
										true
									]
								}
							],
							"sid": 512420002169457
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Button",
									"sid": 654591937214232,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"tutorial_close\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "showTutorialPopUp",
									"sid": 700679209860060,
									"parameters": [
										false
									]
								}
							],
							"sid": 350304196142537
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Button",
									"sid": 227503361761278,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"cycle_toggle\""
									}
								}
							],
							"actions": [],
							"sid": 248854484408363,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 522856319727871,
											"parameters": {
												"variable": "isRunning"
											}
										}
									],
									"actions": [
										{
											"id": "set-animation-frame",
											"objectClass": "Button",
											"sid": 557999343294087,
											"parameters": {
												"frame-number": "2"
											}
										},
										{
											"callFunction": "pauseGame",
											"sid": 126585070611174
										}
									],
									"sid": 575881056932706
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 812219970644364
										}
									],
									"actions": [
										{
											"id": "set-animation-frame",
											"objectClass": "Button",
											"sid": 183419345686281,
											"parameters": {
												"frame-number": "1"
											}
										},
										{
											"callFunction": "resumeGame",
											"sid": 878709651158578
										}
									],
									"sid": 721473953183402
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Button",
									"sid": 439788266229528,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"cycle_accelerate\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "accelerateTime",
									"sid": 856126129689040
								}
							],
							"sid": 894952253602222
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Button",
									"sid": 242942449658873,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"cycle_slow\""
									}
								}
							],
							"actions": [
								{
									"callFunction": "slowTime",
									"sid": 970463341123258
								}
							],
							"sid": 819911765975840
						}
					]
				},
				{
					"functionName": "UIPanelClicked",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "uid",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 974462768814368
						}
					],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "pick-by-unique-id",
							"objectClass": "ClickablePanel",
							"sid": 358031533743081,
							"parameters": {
								"unique-id": "uid"
							}
						}
					],
					"actions": [],
					"sid": 445806361381016,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 184976466962674,
									"parameters": {
										"first-value": "RegexMatchCount(ClickablePanel.id, \"clickable_panel_policy$\", \"\")",
										"comparison": 0,
										"second-value": "1"
									}
								}
							],
							"actions": [
								{
									"callFunction": "showPolicyPanel",
									"sid": 301495726746308,
									"parameters": [
										"\"\"",
										false
									]
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 919277434009768,
									"parameters": {
										"layer": "\"UI\"",
										"interactive": false
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 893466464198907,
									"parameters": {
										"layer": "\"Background\"",
										"interactive": false
									}
								},
								{
									"callFunction": "pauseGame",
									"sid": 883015871945000
								},
								{
									"callFunction": "showPolicyPopUp",
									"sid": 353662209158789,
									"parameters": [
										"RegexReplace(ClickablePanel.id, \"_clickable_panel_policy$\", \"\", \"\") ",
										true
									]
								}
							],
							"sid": 927842640819003
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 523899427282392,
									"parameters": {
										"first-value": "RegexMatchCount(ClickablePanel.id, \"clickable_panel_status$\", \"\")",
										"comparison": 0,
										"second-value": "1"
									}
								}
							],
							"actions": [
								{
									"callFunction": "showStatusPanel",
									"sid": 130283734299786,
									"parameters": [
										"\"\"",
										false
									]
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 173982079499785,
									"parameters": {
										"layer": "\"UI\"",
										"interactive": false
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 217331403875649,
									"parameters": {
										"layer": "\"Background\"",
										"interactive": false
									}
								},
								{
									"callFunction": "pauseGame",
									"sid": 634161716077619
								},
								{
									"callFunction": "showStatusPopUp",
									"sid": 292776158127688,
									"parameters": [
										"RegexReplace(ClickablePanel.id, \"_clickable_panel_status$\", \"\", \"\") ",
										true
									]
								}
							],
							"sid": 928431890772571
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-two-values",
									"objectClass": "System",
									"sid": 152764963612566,
									"parameters": {
										"first-value": "RegexMatchCount(ClickablePanel.id, \"clickable_panel_crisis$\", \"\")",
										"comparison": 0,
										"second-value": "1"
									}
								}
							],
							"actions": [
								{
									"callFunction": "showCrisisPanel",
									"sid": 469312048407482,
									"parameters": [
										false
									]
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 655658362995499,
									"parameters": {
										"layer": "\"UI\"",
										"interactive": false
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 995417616109573,
									"parameters": {
										"layer": "\"Background\"",
										"interactive": false
									}
								},
								{
									"callFunction": "pauseGame",
									"sid": 719364270689648
								},
								{
									"callFunction": "showCrisisPopUp",
									"sid": 569950869119806,
									"parameters": [
										"RegexReplace(ClickablePanel.id, \"_clickable_panel_crisis$\", \"\", \"\") ",
										true
									]
								}
							],
							"sid": 309379442599604
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "ClickablePanel",
									"sid": 537993309463283,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"fiscal\""
									}
								}
							],
							"actions": [
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 511435879808303,
									"parameters": {
										"layer": "\"UI\"",
										"interactive": false
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 929309689817420,
									"parameters": {
										"layer": "\"Background\"",
										"interactive": false
									}
								},
								{
									"callFunction": "pauseGame",
									"sid": 252428618016662
								},
								{
									"callFunction": "showFiscalPopUp",
									"sid": 664687043544134,
									"parameters": [
										true
									]
								}
							],
							"sid": 804627258835099
						}
					]
				},
				{
					"functionName": "showStatusPanel",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "status",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 352533481313809
						},
						{
							"name": "show",
							"type": "boolean",
							"initialValue": "true",
							"comment": "",
							"sid": 547545509619647
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 963236609190068,
							"parameters": {
								"layer": "\"PanelFinancial\"",
								"visibility": "invisible"
							}
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 919041937419996,
							"parameters": {
								"layer": "\"PanelHealth\"",
								"visibility": "invisible"
							}
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 683373750281633,
							"parameters": {
								"layer": "\"PanelEducation\"",
								"visibility": "invisible"
							}
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 949675534525445,
							"parameters": {
								"layer": "\"PanelSocial\"",
								"visibility": "invisible"
							}
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 961467374971351,
							"parameters": {
								"layer": "\"PanelNatural\"",
								"visibility": "invisible"
							}
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 348364989866036,
							"parameters": {
								"layer": "\"PanelLabor\"",
								"visibility": "invisible"
							}
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 978111298224282,
							"parameters": {
								"layer": "\"PanelEnvironment\"",
								"visibility": "invisible"
							}
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 299111793162993,
							"parameters": {
								"layer": "\"PanelInfrastructure\"",
								"visibility": "invisible"
							}
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 828883527779041,
							"parameters": {
								"layer": "\"PanelDefense\"",
								"visibility": "invisible"
							}
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 107672453771516,
							"parameters": {
								"layer": "\"PanelStability\"",
								"visibility": "invisible"
							}
						},
						{
							"id": "set-layer-visible",
							"objectClass": "System",
							"sid": 515819947783456,
							"parameters": {
								"layer": "\"PanelIndustry\"",
								"visibility": "invisible"
							}
						}
					],
					"sid": 710077073666599,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 596221217224655,
									"parameters": {
										"variable": "show"
									}
								}
							],
							"actions": [
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 820755284894423,
									"parameters": {
										"layer": "\"Panel\" & uppercase(left(status, 1)) & right(status, len(status)-1)",
										"visibility": "visible"
									}
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 201423185339505,
									"parameters": {
										"layer": "\"PanelStatus\"",
										"visibility": "visible"
									}
								},
								{
									"type": "script",
									"script": "showStatusPanel(localVars.status, runtime);"
								}
							],
							"sid": 829436645292242
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 371537167153535
								}
							],
							"actions": [
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 599450487188985,
									"parameters": {
										"layer": "\"PanelStatus\"",
										"visibility": "invisible"
									}
								}
							],
							"sid": 644586353903636
						}
					]
				},
				{
					"functionName": "showCrisisPanel",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "show",
							"type": "boolean",
							"initialValue": "false",
							"comment": "",
							"sid": 683212733292981
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 596935964607664,
							"parameters": {
								"type": "log",
								"message": "\"crisispanel \" & show"
							}
						}
					],
					"sid": 289707340048162,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 177379268107575,
									"parameters": {
										"variable": "show"
									}
								}
							],
							"actions": [
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 700853927476930,
									"parameters": {
										"layer": "\"PanelCrisis\"",
										"visibility": "visible"
									}
								}
							],
							"sid": 207270832904919
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 372144369014769
								}
							],
							"actions": [
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 385860963892232,
									"parameters": {
										"layer": "\"PanelCrisis\"",
										"visibility": "invisible"
									}
								}
							],
							"sid": 648076060006760
						}
					]
				},
				{
					"functionName": "showPolicyPanel",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "policyType",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 922209966426629
						},
						{
							"name": "show",
							"type": "boolean",
							"initialValue": "true",
							"comment": "",
							"sid": 208659183222295
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 653537904875028,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 651416469506009,
									"parameters": {
										"variable": "show"
									}
								}
							],
							"actions": [
								{
									"type": "script",
									"script": "console.log(\"policyPanel\", localVars.policyType);\nshowPolicyPanel(localVars.policyType, runtime);"
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 455130048507148,
									"parameters": {
										"layer": "\"PanelPolicy\"",
										"visibility": "visible"
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 396202144256239,
									"parameters": {
										"layer": "\"PanelPolicy\"",
										"interactive": true
									}
								}
							],
							"sid": 106018960529653
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 507953959194330
								}
							],
							"actions": [
								{
									"type": "script",
									"script": "console.log(\"policyPanel false\");"
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 342330189073025,
									"parameters": {
										"layer": "\"PanelPolicy\"",
										"visibility": "invisible"
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 597123264674596,
									"parameters": {
										"layer": "\"PanelPolicy\"",
										"interactive": false
									}
								}
							],
							"sid": 758777198752536
						}
					]
				},
				{
					"functionName": "showPolicyPopUp",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "policyName",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 835573975774654
						},
						{
							"name": "show",
							"type": "boolean",
							"initialValue": "true",
							"comment": "",
							"sid": 908970220154128
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 589633470818525,
							"parameters": {
								"type": "log",
								"message": "\"policyPopUp \" & show"
							}
						}
					],
					"sid": 519526908750769,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 264795687369875,
									"parameters": {
										"variable": "show"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "Slider",
									"sid": 861653185970785,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"policy_pop_up_slider\""
									}
								}
							],
							"actions": [
								{
									"type": "script",
									"script": "console.log(\"popup true\");"
								},
								{
									"type": "script",
									"script": "console.log(\"policyPopUp\", localVars.policyName);\nsetupPolicyPopUp(localVars.policyName, runtime)\n\nshowPolicyEffectViews(localVars.policyName, runtime);"
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 651948509503202,
									"parameters": {
										"variable": "policyToSet",
										"value": "policyName"
									}
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 531973550550142,
									"parameters": {
										"layer": "\"PolicyPopUp\"",
										"visibility": "visible"
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 279148988176706,
									"parameters": {
										"layer": "\"PolicyPopUp\"",
										"interactive": true
									}
								},
								{
									"callFunction": "showPopUp",
									"sid": 868573488144778,
									"parameters": [
										true
									]
								}
							],
							"sid": 326786026550584
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 934929352750706
								}
							],
							"actions": [
								{
									"type": "script",
									"script": "console.log(\"popup false\");"
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 766868577003923,
									"parameters": {
										"layer": "\"PolicyPopUp\"",
										"visibility": "invisible"
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 577374080499364,
									"parameters": {
										"layer": "\"PolicyPopUp\"",
										"interactive": false
									}
								},
								{
									"callFunction": "showPopUp",
									"sid": 546421311307783,
									"parameters": [
										false
									]
								}
							],
							"sid": 538780034970911
						}
					]
				},
				{
					"functionName": "showStatusPopUp",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "statusName",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 324104761724527
						},
						{
							"name": "show",
							"type": "boolean",
							"initialValue": "true",
							"comment": "",
							"sid": 664555895620135
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 834384222430286,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 493420952077439,
									"parameters": {
										"variable": "show"
									}
								}
							],
							"actions": [
								{
									"type": "script",
									"script": "console.log(\"popup true\");"
								},
								{
									"type": "script",
									"script": "console.log(\"status pop up \", localVars.statusName);\nsetupStatusPopUp(localVars.statusName, runtime)"
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 946202552471851,
									"parameters": {
										"layer": "\"StatusPopUp\"",
										"visibility": "visible"
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 474862775474050,
									"parameters": {
										"layer": "\"StatusPopUp\"",
										"interactive": true
									}
								},
								{
									"callFunction": "showPopUp",
									"sid": 350800221213188,
									"parameters": [
										true
									]
								}
							],
							"sid": 621819265000644
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 437970063087935
								}
							],
							"actions": [
								{
									"type": "script",
									"script": "console.log(\"popup false\");"
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 417514277488398,
									"parameters": {
										"layer": "\"StatusPopUp\"",
										"visibility": "invisible"
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 920780439175683,
									"parameters": {
										"layer": "\"StatusPopUp\"",
										"interactive": false
									}
								},
								{
									"callFunction": "showPopUp",
									"sid": 189814999733883,
									"parameters": [
										false
									]
								}
							],
							"sid": 652659296252275
						}
					]
				},
				{
					"functionName": "showCrisisPopUp",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "crisisName",
							"type": "string",
							"initialValue": "",
							"comment": "",
							"sid": 734759197463648
						},
						{
							"name": "show",
							"type": "boolean",
							"initialValue": "true",
							"comment": "",
							"sid": 861711545890798
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 346735228765740,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 266526659814152,
									"parameters": {
										"variable": "show"
									}
								}
							],
							"actions": [
								{
									"type": "script",
									"script": "console.log(\"popup true\");"
								},
								{
									"type": "script",
									"script": "console.log(\"crisis pop up \", localVars.crisisName);\nsetupCrisisPopUp(localVars.crisisName, runtime)"
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 475752116242674,
									"parameters": {
										"layer": "\"CrisisPopUp\"",
										"visibility": "visible"
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 717273533814884,
									"parameters": {
										"layer": "\"CrisisPopUp\"",
										"interactive": true
									}
								},
								{
									"callFunction": "showPopUp",
									"sid": 444086713392727,
									"parameters": [
										true
									]
								}
							],
							"sid": 409240594293085
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 925153363403141
								}
							],
							"actions": [
								{
									"type": "script",
									"script": "console.log(\"popup false\");"
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 779207237831123,
									"parameters": {
										"layer": "\"CrisisPopUp\"",
										"visibility": "invisible"
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 723487273707759,
									"parameters": {
										"layer": "\"CrisisPopUp\"",
										"interactive": false
									}
								},
								{
									"callFunction": "showPopUp",
									"sid": 133473978228466,
									"parameters": [
										false
									]
								}
							],
							"sid": 964080059212312
						}
					]
				},
				{
					"functionName": "showFiscalPopUp",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "show",
							"type": "boolean",
							"initialValue": "true",
							"comment": "",
							"sid": 287262756514396
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 147456789157054,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 787669852746139,
									"parameters": {
										"variable": "show"
									}
								}
							],
							"actions": [
								{
									"type": "script",
									"script": "console.log(\"popup true\");"
								},
								{
									"type": "script",
									"script": "showFiscalPopUp(runtime);"
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 530349026953683,
									"parameters": {
										"layer": "\"FiscalPopUp\"",
										"visibility": "visible"
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 138032936870714,
									"parameters": {
										"layer": "\"FiscalPopUp\"",
										"interactive": true
									}
								},
								{
									"callFunction": "showPopUp",
									"sid": 306359754193016,
									"parameters": [
										true
									]
								}
							],
							"sid": 778351720475665
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 244220830756638
								}
							],
							"actions": [
								{
									"type": "script",
									"script": "console.log(\"popup false\");"
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 786556602932549,
									"parameters": {
										"layer": "\"FiscalPopUp\"",
										"visibility": "invisible"
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 545774493643812,
									"parameters": {
										"layer": "\"FiscalPopUp\"",
										"interactive": false
									}
								},
								{
									"callFunction": "showPopUp",
									"sid": 599934398369655,
									"parameters": [
										false
									]
								}
							],
							"sid": 792384865600229
						}
					]
				},
				{
					"functionName": "showPausedPopUp",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "show",
							"type": "boolean",
							"initialValue": "true",
							"comment": "",
							"sid": 618227854020043
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 210102582084121,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 314413663209323,
									"parameters": {
										"variable": "show"
									}
								}
							],
							"actions": [
								{
									"id": "log",
									"objectClass": "Browser",
									"sid": 596918249825420,
									"parameters": {
										"type": "log",
										"message": "\"showPausedPopUp\""
									}
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 128722129691162,
									"parameters": {
										"layer": "\"PausedPopUp\"",
										"visibility": "visible"
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 799833947302361,
									"parameters": {
										"layer": "\"PausedPopUp\"",
										"interactive": true
									}
								},
								{
									"callFunction": "showPopUp",
									"sid": 150453004345662,
									"parameters": [
										true
									]
								}
							],
							"sid": 905243933596775
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 308868222617151
								}
							],
							"actions": [
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 175416096938100,
									"parameters": {
										"layer": "\"PausedPopUp\"",
										"visibility": "invisible"
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 699225562836858,
									"parameters": {
										"layer": "\"PausedPopUp\"",
										"interactive": false
									}
								},
								{
									"callFunction": "showPopUp",
									"sid": 135554968668006,
									"parameters": [
										false
									]
								}
							],
							"sid": 406054494015048
						}
					]
				},
				{
					"functionName": "showTutorialPopUp",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "show",
							"type": "boolean",
							"initialValue": "true",
							"comment": "",
							"sid": 901437280224005
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 770875136741438,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 250605453863739,
									"parameters": {
										"variable": "show"
									}
								}
							],
							"actions": [
								{
									"id": "log",
									"objectClass": "Browser",
									"sid": 296795553408243,
									"parameters": {
										"type": "log",
										"message": "\"showPausedPopUp\""
									}
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 624653497446036,
									"parameters": {
										"layer": "\"TutorialPopUp\"",
										"visibility": "visible"
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 509787960954336,
									"parameters": {
										"layer": "\"TutorialPopUp\"",
										"interactive": true
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 716533423094744,
									"parameters": {
										"layer": "\"Game\"",
										"interactive": false
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 606000408560282,
									"parameters": {
										"layer": "\"UI\"",
										"interactive": false
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 513954870305912,
									"parameters": {
										"layer": "\"Background\"",
										"interactive": false
									}
								},
								{
									"callFunction": "showPopUp",
									"sid": 708263994542808,
									"parameters": [
										true
									]
								}
							],
							"sid": 893279995575979
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 915371840102912
								}
							],
							"actions": [
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 839446201237378,
									"parameters": {
										"layer": "\"TutorialPopUp\"",
										"visibility": "invisible"
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 423615858305199,
									"parameters": {
										"layer": "\"TutorialPopUp\"",
										"interactive": false
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 647062174564402,
									"parameters": {
										"layer": "\"Game\"",
										"interactive": true
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 471917060329720,
									"parameters": {
										"layer": "\"UI\"",
										"interactive": true
									}
								},
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 342195968486020,
									"parameters": {
										"layer": "\"Background\"",
										"interactive": true
									}
								},
								{
									"callFunction": "showPopUp",
									"sid": 966581227838758,
									"parameters": [
										false
									]
								}
							],
							"sid": 495896835169310
						}
					]
				},
				{
					"functionName": "setupMap",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "is-empty",
							"objectClass": "MapData",
							"sid": 355190005855381,
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 940653053421972,
							"parameters": {
								"type": "log",
								"message": "\"Setup\" & MapData.Width & \"|\" & MapData.Height"
							}
						},
						{
							"id": "set-size",
							"objectClass": "BiomeData",
							"sid": 183648249371518,
							"parameters": {
								"width": "LayoutWidth",
								"height": "LayoutHeight",
								"depth": "1"
							}
						}
					],
					"sid": 648571395013887,
					"children": [
						{
							"eventType": "variable",
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 570534923671095
						},
						{
							"eventType": "variable",
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 433339527994307
						},
						{
							"eventType": "variable",
							"name": "biome",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 168008982588151
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "repeat",
									"objectClass": "System",
									"sid": 439833045380323,
									"parameters": {
										"count": "LayoutWidth"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 217110074972147,
									"parameters": {
										"variable": "x",
										"value": "loopindex"
									}
								}
							],
							"sid": 689334920133562,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "repeat",
											"objectClass": "System",
											"sid": 479142711214070,
											"parameters": {
												"count": "LayoutHeight"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 813511635992886,
											"parameters": {
												"variable": "y",
												"value": "loopindex"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 428777315761071,
											"parameters": {
												"variable": "biome",
												"value": "AdvancedRandom.Voronoi2d(x * 0.4, y * 0.4)"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 855275756427840,
											"parameters": {
												"variable": "biome",
												"value": "int(biome * 5)"
											}
										},
										{
											"id": "set-at-xy",
											"objectClass": "BiomeData",
											"sid": 168178331373264,
											"parameters": {
												"x": "x",
												"y": "y",
												"value": "biome"
											}
										}
									],
									"sid": 545229782002675
								}
							]
						},
						{
							"eventType": "variable",
							"name": "topTile",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 528775806058443
						},
						{
							"eventType": "variable",
							"name": "rightTile",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 973976415973191
						},
						{
							"eventType": "variable",
							"name": "bottomTile",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 765901316533299
						},
						{
							"eventType": "variable",
							"name": "leftTile",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 786870824089923
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each-element",
									"objectClass": "MapData",
									"sid": 906353011463029,
									"parameters": {
										"axes": "xy"
									}
								}
							],
							"actions": [
								{
									"id": "log",
									"objectClass": "Browser",
									"sid": 385603572012208,
									"disabled": true,
									"parameters": {
										"type": "log",
										"message": "\"Array \" & MapData.CurX & \"|\" & MapData.CurY & \"|\" &  MapData.CurValue"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 601343467678394,
									"parameters": {
										"variable": "topTile",
										"value": "MapData.At(MapData.CurX, MapData.CurY - 1) > 0 | MapData.CurY - 1 < 0 ? 1: 0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 232942412419582,
									"parameters": {
										"variable": "rightTile",
										"value": "MapData.At(MapData.CurX + 1, MapData.CurY) > 0 | MapData.CurX + 1 >= MapData.Width  ? 1: 0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 933242105065105,
									"parameters": {
										"variable": "bottomTile",
										"value": "MapData.At(MapData.CurX, MapData.CurY + 1) > 0 | MapData.CurY + 1 >= MapData.Height  ? 1: 0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 449973954164519,
									"parameters": {
										"variable": "leftTile",
										"value": "MapData.At(MapData.CurX - 1, MapData.CurY) > 0 | MapData.CurX - 1 < 0 ? 1: 0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 554876501189109,
									"disabled": true,
									"parameters": {
										"variable": "topTile",
										"value": "MapData.At(MapData.CurX, MapData.CurY - 1) > 0 | MapData.CurY - 1 < MapData.Height ? 1: 0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 560457159924167,
									"disabled": true,
									"parameters": {
										"variable": "rightTile",
										"value": "MapData.At(MapData.CurX + 1, MapData.CurY) > 0 | MapData.CurX + 1 > MapData.Width  ? 1: 0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 327534167981986,
									"disabled": true,
									"parameters": {
										"variable": "bottomTile",
										"value": "MapData.At(MapData.CurX, MapData.CurY + 1) > 0 | MapData.CurY + 1 > MapData.Height  ? 1: 0"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 134083280596119,
									"disabled": true,
									"parameters": {
										"variable": "leftTile",
										"value": "MapData.At(MapData.CurX - 1, MapData.CurY) > 0  ? 1: 0"
									}
								}
							],
							"sid": 222551907863296,
							"children": [
								{
									"eventType": "variable",
									"name": "valueBiome",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 194348411287070
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-current-value",
											"objectClass": "MapData",
											"sid": 312092878295808,
											"parameters": {
												"comparison": 0,
												"value": "0"
											}
										}
									],
									"actions": [
										{
											"id": "erase-tile",
											"objectClass": "TilemapBiome",
											"sid": 676788722665602,
											"parameters": {
												"tile-x": "MapData.CurX",
												"tile-y": "MapData.CurY"
											}
										}
									],
									"sid": 809167540680277
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 682335998322308
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 370709758551648,
											"parameters": {
												"variable": "valueBiome",
												"value": "random(0, 1) > 0.7 ? BiomeData.At(MapData.CurX * 64, MapData.CurY * 64) : 0"
											}
										},
										{
											"id": "log",
											"objectClass": "Browser",
											"sid": 365089044377932,
											"parameters": {
												"type": "log",
												"message": "\"biome \" & MapData.CurValue"
											}
										}
									],
									"sid": 518525608510766,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 951904855850395,
													"parameters": {
														"first-value": "topTile + rightTile + bottomTile + leftTile",
														"comparison": 0,
														"second-value": "0"
													}
												}
											],
											"actions": [
												{
													"id": "set-tile",
													"objectClass": "TilemapBiome",
													"sid": 542293142021887,
													"parameters": {
														"tile-x": "MapData.CurX",
														"tile-y": "MapData.CurY",
														"tile": "3 + valueBiome * 5",
														"state": "normal"
													}
												}
											],
											"sid": 684030228760244
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 845781152740176,
													"parameters": {
														"first-value": "topTile + rightTile + bottomTile + leftTile",
														"comparison": 0,
														"second-value": "1"
													}
												}
											],
											"actions": [
												{
													"id": "set-tile",
													"objectClass": "TilemapBiome",
													"sid": 689803958880591,
													"parameters": {
														"tile-x": "MapData.CurX",
														"tile-y": "MapData.CurY",
														"tile": "2 + valueBiome * 5",
														"state": "normal"
													}
												}
											],
											"sid": 937726341797239,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-eventvar",
															"objectClass": "System",
															"sid": 684017859486427,
															"parameters": {
																"variable": "bottomTile",
																"comparison": 0,
																"value": "1"
															}
														}
													],
													"actions": [
														{
															"id": "set-tile-state",
															"objectClass": "TilemapBiome",
															"sid": 387007643579734,
															"parameters": {
																"tile-x": "MapData.CurX",
																"tile-y": "MapData.CurY",
																"state": "rotated-90"
															}
														}
													],
													"sid": 457134567731856
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-eventvar",
															"objectClass": "System",
															"sid": 566975116704723,
															"parameters": {
																"variable": "leftTile",
																"comparison": 0,
																"value": "1"
															}
														}
													],
													"actions": [
														{
															"id": "set-tile-state",
															"objectClass": "TilemapBiome",
															"sid": 210605491815157,
															"parameters": {
																"tile-x": "MapData.CurX",
																"tile-y": "MapData.CurY",
																"state": "rotated-180"
															}
														}
													],
													"sid": 120906974772620
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-eventvar",
															"objectClass": "System",
															"sid": 414032873112982,
															"parameters": {
																"variable": "topTile",
																"comparison": 0,
																"value": "1"
															}
														}
													],
													"actions": [
														{
															"id": "set-tile-state",
															"objectClass": "TilemapBiome",
															"sid": 693431479051190,
															"parameters": {
																"tile-x": "MapData.CurX",
																"tile-y": "MapData.CurY",
																"state": "rotated-270"
															}
														}
													],
													"sid": 455105036198021
												}
											]
										},
										{
											"eventType": "variable",
											"name": "upperRightTile",
											"type": "number",
											"initialValue": "0",
											"comment": "",
											"isStatic": false,
											"isConstant": false,
											"sid": 682929017944984
										},
										{
											"eventType": "variable",
											"name": "upperLeftTile",
											"type": "number",
											"initialValue": "0",
											"comment": "",
											"isStatic": false,
											"isConstant": false,
											"sid": 476621059532106
										},
										{
											"eventType": "variable",
											"name": "lowerRightTile",
											"type": "number",
											"initialValue": "0",
											"comment": "",
											"isStatic": false,
											"isConstant": false,
											"sid": 555722941568122
										},
										{
											"eventType": "variable",
											"name": "lowerLeftTile",
											"type": "number",
											"initialValue": "0",
											"comment": "",
											"isStatic": false,
											"isConstant": false,
											"sid": 590901595222769
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 822861411528858,
													"parameters": {
														"first-value": "topTile + rightTile + bottomTile + leftTile",
														"comparison": 0,
														"second-value": "2"
													}
												},
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 248185133275933,
													"parameters": {
														"first-value": "topTile + bottomTile",
														"comparison": 1,
														"second-value": "2"
													}
												},
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 775580444362094,
													"parameters": {
														"first-value": "leftTile + rightTile",
														"comparison": 1,
														"second-value": "2"
													}
												}
											],
											"actions": [
												{
													"id": "set-tile",
													"objectClass": "TilemapBiome",
													"sid": 694369580391525,
													"parameters": {
														"tile-x": "MapData.CurX",
														"tile-y": "MapData.CurY",
														"tile": "1 + valueBiome * 5",
														"state": "normal"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 438704345432462,
													"parameters": {
														"variable": "lowerLeftTile",
														"value": "MapData.At(MapData.CurX - 1, MapData.CurY + 1) > 0 | MapData.CurX - 1 < 0 | MapData.CurY + 1 >= MapData.Height ? 1: 0"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 533926956797506,
													"parameters": {
														"variable": "lowerRightTile",
														"value": "MapData.At(MapData.CurX + 1, MapData.CurY + 1) > 0 | MapData.CurX + 1 >= MapData.Width | MapData.CurY + 1 >= MapData.Height ? 1: 0"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 776064583651853,
													"parameters": {
														"variable": "upperRightTile",
														"value": "MapData.At(MapData.CurX + 1, MapData.CurY - 1) > 0 | MapData.CurX + 1 >= MapData.Width | MapData.CurY - 1 < 0 ? 1 : 0"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 775722309178893,
													"parameters": {
														"variable": "upperLeftTile",
														"value": "MapData.At(MapData.CurX - 1, MapData.CurY - 1) > 0 | MapData.CurX - 1 < 0 | MapData.CurY - 1 < 0 ? 1: 0"
													}
												}
											],
											"sid": 290560513522916,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 955117987660430,
															"parameters": {
																"first-value": "upperLeftTile + lowerRightTile + abs(topTile - rightTile) + abs(leftTile- bottomTile)",
																"comparison": 0,
																"second-value": "2"
															}
														},
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 882600654336217,
															"parameters": {
																"first-value": "upperRightTile + lowerLeftTile + abs(topTile - leftTile) + abs(rightTile- bottomTile)",
																"comparison": 0,
																"second-value": "2"
															}
														}
													],
													"actions": [
														{
															"id": "set-tile",
															"objectClass": "TilemapBiome",
															"sid": 144005859001647,
															"parameters": {
																"tile-x": "MapData.CurX",
																"tile-y": "MapData.CurY",
																"tile": "0 + valueBiome * 5",
																"state": "normal"
															}
														}
													],
													"sid": 220616066651545,
													"isOrBlock": true
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 601437937903103,
															"parameters": {
																"first-value": "rightTile + bottomTile",
																"comparison": 0,
																"second-value": "2"
															}
														}
													],
													"actions": [
														{
															"id": "set-tile-state",
															"objectClass": "TilemapBiome",
															"sid": 967228127057731,
															"parameters": {
																"tile-x": "MapData.CurX",
																"tile-y": "MapData.CurY",
																"state": "rotated-90"
															}
														}
													],
													"sid": 673379346042270
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 165347790321534,
															"parameters": {
																"first-value": "bottomTile + leftTile",
																"comparison": 0,
																"second-value": "2"
															}
														}
													],
													"actions": [
														{
															"id": "set-tile-state",
															"objectClass": "TilemapBiome",
															"sid": 797167456531463,
															"parameters": {
																"tile-x": "MapData.CurX",
																"tile-y": "MapData.CurY",
																"state": "rotated-180"
															}
														}
													],
													"sid": 853164335726604
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-two-values",
															"objectClass": "System",
															"sid": 933577477177509,
															"parameters": {
																"first-value": "leftTile + topTile",
																"comparison": 0,
																"second-value": "2"
															}
														}
													],
													"actions": [
														{
															"id": "set-tile-state",
															"objectClass": "TilemapBiome",
															"sid": 353446021878062,
															"parameters": {
																"tile-x": "MapData.CurX",
																"tile-y": "MapData.CurY",
																"state": "rotated-270"
															}
														}
													],
													"sid": 881121788890800
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 857883801140927,
													"parameters": {
														"first-value": "topTile + rightTile + bottomTile + leftTile",
														"comparison": 5,
														"second-value": "3"
													}
												}
											],
											"actions": [
												{
													"id": "set-tile",
													"objectClass": "TilemapBiome",
													"sid": 783523422758321,
													"parameters": {
														"tile-x": "MapData.CurX",
														"tile-y": "MapData.CurY",
														"tile": "4 + valueBiome * 5",
														"state": "normal"
													}
												}
											],
											"sid": 815493399737596
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 422508135499734,
													"parameters": {
														"first-value": "topTile + rightTile + bottomTile + leftTile",
														"comparison": 0,
														"second-value": "2"
													}
												},
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 993742694807495,
													"parameters": {
														"first-value": "topTile + bottomTile",
														"comparison": 0,
														"second-value": "2"
													}
												},
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 818733369876570,
													"parameters": {
														"first-value": "leftTile + rightTile",
														"comparison": 0,
														"second-value": "2"
													}
												}
											],
											"actions": [
												{
													"id": "set-tile",
													"objectClass": "TilemapBiome",
													"sid": 767799055215348,
													"parameters": {
														"tile-x": "MapData.CurX",
														"tile-y": "MapData.CurY",
														"tile": "4 + valueBiome * 5",
														"state": "normal"
													}
												}
											],
											"sid": 998858339703231
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "DrawingCanvas",
									"sid": 979141713193418,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"map_texture\""
									}
								}
							],
							"actions": [
								{
									"id": "log",
									"objectClass": "Browser",
									"sid": 526840017785271,
									"parameters": {
										"type": "log",
										"message": "\"setupMap \" & DrawingCanvas.id"
									}
								},
								{
									"id": "save-snapshot",
									"objectClass": "DrawingCanvas",
									"sid": 921682019903402
								}
							],
							"sid": 638525054885043
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "DrawingCanvas",
									"sid": 276885534549392,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"map_water\""
									}
								}
							],
							"actions": [
								{
									"id": "log",
									"objectClass": "Browser",
									"sid": 440486560590695,
									"parameters": {
										"type": "log",
										"message": "\"setupMap \" & DrawingCanvas.id"
									}
								},
								{
									"id": "save-snapshot",
									"objectClass": "DrawingCanvas",
									"sid": 623082137144706
								}
							],
							"sid": 684187167286852
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [],
							"sid": 963396989919335
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-snapshot",
							"objectClass": "DrawingCanvas",
							"sid": 963838766427462
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "DrawingCanvas",
							"sid": 147260840998917,
							"parameters": {
								"instance-variable": "id",
								"comparison": 0,
								"value": "\"map_texture\""
							}
						}
					],
					"actions": [
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 248446438673824,
							"disabled": true,
							"parameters": {
								"type": "log",
								"message": "\"snapshot \" & DrawingCanvas.id"
							}
						},
						{
							"callFunction": "setupMapTexture",
							"sid": 513670484779722
						}
					],
					"sid": 681475415740990
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-snapshot",
							"objectClass": "DrawingCanvas",
							"sid": 200459232349567
						},
						{
							"id": "compare-instance-variable",
							"objectClass": "DrawingCanvas",
							"sid": 894633158293442,
							"parameters": {
								"instance-variable": "id",
								"comparison": 0,
								"value": "\"map_water\""
							}
						}
					],
					"actions": [
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 425515972338842,
							"disabled": true,
							"parameters": {
								"type": "log",
								"message": "\"snapshot \" & DrawingCanvas.id"
							}
						},
						{
							"callFunction": "setupMapWater",
							"sid": 747003573742827
						}
					],
					"sid": 293527030321382
				},
				{
					"functionName": "setupMapTexture",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "DrawingCanvas",
							"sid": 220890088667032,
							"parameters": {
								"instance-variable": "id",
								"comparison": 0,
								"value": "\"map_texture\""
							}
						}
					],
					"actions": [
						{
							"id": "createGradient",
							"objectClass": "AdvancedRandom",
							"sid": 152632323315723,
							"parameters": {
								"name": "\"MapGradient\"",
								"isColor": "color"
							}
						},
						{
							"id": "addStop",
							"objectClass": "AdvancedRandom",
							"sid": 554061574403312,
							"parameters": {
								"position": "0",
								"value": "rgbEx255(205, 181, 124)"
							}
						},
						{
							"id": "addStop",
							"objectClass": "AdvancedRandom",
							"sid": 463387532358928,
							"parameters": {
								"position": "1",
								"value": "rgbEx255(233, 222, 192)"
							}
						},
						{
							"id": "addStop",
							"objectClass": "AdvancedRandom",
							"sid": 113377250694798,
							"disabled": true,
							"parameters": {
								"position": "0",
								"value": "rgba255(233, 222, 192, 0)"
							}
						},
						{
							"id": "addStop",
							"objectClass": "AdvancedRandom",
							"sid": 492326315759803,
							"disabled": true,
							"parameters": {
								"position": "1",
								"value": "rgba255(233, 222, 192, 255)"
							}
						},
						{
							"id": "addStop",
							"objectClass": "AdvancedRandom",
							"sid": 741026214831496,
							"disabled": true,
							"parameters": {
								"position": "0",
								"value": "rgbEx255(63, 124, 196)"
							}
						},
						{
							"id": "addStop",
							"objectClass": "AdvancedRandom",
							"sid": 988972396834226,
							"disabled": true,
							"parameters": {
								"position": "1",
								"value": "rgbEx255(127, 191, 114)"
							}
						},
						{
							"id": "seed",
							"objectClass": "AdvancedRandom",
							"sid": 762253575380952,
							"parameters": {
								"seed": "AdvancedRandom.RandomSeed"
							}
						},
						{
							"id": "octaves",
							"objectClass": "AdvancedRandom",
							"sid": 766172108570123,
							"parameters": {
								"count": "1"
							}
						},
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 657246568874043,
							"parameters": {
								"type": "log",
								"message": "\"setmaptexture \" & DrawingCanvas.id"
							}
						},
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 339454373685185,
							"parameters": {
								"type": "log",
								"message": "\"layout \" & LayoutName"
							}
						},
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 431613807204193,
							"parameters": {
								"type": "log",
								"message": "\"map \" & mapZoom"
							}
						}
					],
					"sid": 746291021299290,
					"children": [
						{
							"eventType": "variable",
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 636863623152122
						},
						{
							"eventType": "variable",
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 159857455912467
						},
						{
							"eventType": "variable",
							"name": "value",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 319086374946044
						},
						{
							"eventType": "variable",
							"name": "threshold",
							"type": "number",
							"initialValue": "0.45",
							"comment": "",
							"isStatic": true,
							"isConstant": true,
							"sid": 132879408678927
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "repeat",
									"objectClass": "System",
									"sid": 554910621769807,
									"parameters": {
										"count": "DrawingCanvas.SnapshotWidth"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 922158698132425,
									"parameters": {
										"variable": "x",
										"value": "loopindex"
									}
								}
							],
							"sid": 533267981803314,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "repeat",
											"objectClass": "System",
											"sid": 818932821782546,
											"parameters": {
												"count": "DrawingCanvas.SnapshotHeight"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 539033649020162,
											"parameters": {
												"variable": "y",
												"value": "loopindex"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 493000959922311,
											"disabled": true,
											"parameters": {
												"variable": "value",
												"value": "AdvancedRandom.Classic2d(x / 5.8, y / 5.8)"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 918294911501957,
											"parameters": {
												"variable": "value",
												"value": "AdvancedRandom.Classic2d(x / 2.7, y / 2.7)"
											}
										},
										{
											"id": "log",
											"objectClass": "Browser",
											"sid": 236396340413055,
											"disabled": true,
											"parameters": {
												"type": "log",
												"message": "\"pixel \" & value"
											}
										}
									],
									"sid": 792352404601253,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-eventvar",
													"objectClass": "System",
													"sid": 731293150914299,
													"parameters": {
														"variable": "value",
														"comparison": 3,
														"value": "mapThreshold"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 324617824900798,
													"parameters": {
														"variable": "value",
														"value": "value / mapThreshold"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 259659189788649,
													"parameters": {
														"variable": "value",
														"value": "value < threshold ? 0 : (value - threshold) / (1 - threshold)"
													}
												},
												{
													"id": "snapshot-set-pixel",
													"objectClass": "DrawingCanvas",
													"sid": 898812593384116,
													"parameters": {
														"x": "x",
														"y": "y",
														"color": "AdvancedRandom.GradientByName(\"MapGradient\", value)"
													}
												}
											],
											"sid": 666441942656333
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "load-snapshot",
									"objectClass": "DrawingCanvas",
									"sid": 491090975727582
								},
								{
									"id": "set-opacity",
									"objectClass": "DrawingCanvas",
									"sid": 752147882959979,
									"parameters": {
										"opacity": "50"
									}
								}
							],
							"sid": 806057740764900
						}
					]
				},
				{
					"functionName": "setupMapWater",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [
						{
							"id": "compare-instance-variable",
							"objectClass": "DrawingCanvas",
							"sid": 856427062246343,
							"parameters": {
								"instance-variable": "id",
								"comparison": 0,
								"value": "\"map_water\""
							}
						}
					],
					"actions": [
						{
							"id": "createGradient",
							"objectClass": "AdvancedRandom",
							"sid": 844495090200540,
							"parameters": {
								"name": "\"MapGradient2\"",
								"isColor": "color"
							}
						},
						{
							"id": "addStop",
							"objectClass": "AdvancedRandom",
							"sid": 653377293830558,
							"parameters": {
								"position": "0",
								"value": "rgbEx255(72, 83, 154)"
							}
						},
						{
							"id": "addStop",
							"objectClass": "AdvancedRandom",
							"sid": 137538381272829,
							"parameters": {
								"position": "0.45",
								"value": "rgbEx255(72, 83, 154)"
							}
						},
						{
							"id": "addStop",
							"objectClass": "AdvancedRandom",
							"sid": 589222368803149,
							"parameters": {
								"position": "0.55",
								"value": "rgbEx255(63, 111, 135)"
							}
						},
						{
							"id": "addStop",
							"objectClass": "AdvancedRandom",
							"sid": 674445856904793,
							"parameters": {
								"position": "0.6",
								"value": "rgbEx255(63, 111, 135)"
							}
						},
						{
							"id": "addStop",
							"objectClass": "AdvancedRandom",
							"sid": 632532612686842,
							"parameters": {
								"position": "0.8",
								"value": "rgbEx255(51, 87, 130)"
							}
						},
						{
							"id": "addStop",
							"objectClass": "AdvancedRandom",
							"sid": 495121835197912,
							"parameters": {
								"position": "1",
								"value": "rgbEx255(51, 87, 130)"
							}
						},
						{
							"id": "addStop",
							"objectClass": "AdvancedRandom",
							"sid": 797333895425877,
							"disabled": true,
							"parameters": {
								"position": "0",
								"value": "rgba255(233, 222, 192, 0)"
							}
						},
						{
							"id": "addStop",
							"objectClass": "AdvancedRandom",
							"sid": 834175523694941,
							"disabled": true,
							"parameters": {
								"position": "1",
								"value": "rgba255(233, 222, 192, 255)"
							}
						},
						{
							"id": "addStop",
							"objectClass": "AdvancedRandom",
							"sid": 887167535806500,
							"disabled": true,
							"parameters": {
								"position": "0",
								"value": "rgbEx255(63, 124, 196)"
							}
						},
						{
							"id": "addStop",
							"objectClass": "AdvancedRandom",
							"sid": 584265414713925,
							"disabled": true,
							"parameters": {
								"position": "1",
								"value": "rgbEx255(127, 191, 114)"
							}
						},
						{
							"id": "seed",
							"objectClass": "AdvancedRandom",
							"sid": 211153693115031,
							"parameters": {
								"seed": "AdvancedRandom.RandomSeed"
							}
						},
						{
							"id": "octaves",
							"objectClass": "AdvancedRandom",
							"sid": 930530664665352,
							"parameters": {
								"count": "1"
							}
						},
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 417222828954111,
							"parameters": {
								"type": "log",
								"message": "\"setmapwater \" & DrawingCanvas.id"
							}
						},
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 204095165899386,
							"parameters": {
								"type": "log",
								"message": "\"layout \" & LayoutName"
							}
						},
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 491376663994205,
							"parameters": {
								"type": "log",
								"message": "\"map \" & mapZoom"
							}
						}
					],
					"sid": 108697703514859,
					"children": [
						{
							"eventType": "variable",
							"name": "x",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 419839624277193
						},
						{
							"eventType": "variable",
							"name": "y",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 497293202879523
						},
						{
							"eventType": "variable",
							"name": "value",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"isStatic": false,
							"isConstant": false,
							"sid": 145083732418819
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "repeat",
									"objectClass": "System",
									"sid": 433584705508900,
									"parameters": {
										"count": "DrawingCanvas.SnapshotWidth"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 983763631008892,
									"parameters": {
										"variable": "x",
										"value": "loopindex"
									}
								}
							],
							"sid": 346008168458477,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "repeat",
											"objectClass": "System",
											"sid": 201995548131097,
											"parameters": {
												"count": "DrawingCanvas.SnapshotHeight"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 388346995575458,
											"parameters": {
												"variable": "y",
												"value": "loopindex"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 771637280244159,
											"parameters": {
												"variable": "value",
												"value": "AdvancedRandom.Classic2d(x / 5.8, y / 5.8)"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 344736041175931,
											"disabled": true,
											"parameters": {
												"variable": "value",
												"value": "AdvancedRandom.Classic2d(x / 2.7, y / 2.7)"
											}
										},
										{
											"id": "log",
											"objectClass": "Browser",
											"sid": 785736361762403,
											"disabled": true,
											"parameters": {
												"type": "log",
												"message": "\"pixel \" & value"
											}
										},
										{
											"id": "snapshot-set-pixel",
											"objectClass": "DrawingCanvas",
											"sid": 899868479405960,
											"parameters": {
												"x": "x",
												"y": "y",
												"color": "AdvancedRandom.GradientByName(\"MapGradient2\", value)"
											}
										}
									],
									"sid": 194472484861110,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 986228947502261,
													"parameters": {
														"first-value": "random(0, 1)",
														"comparison": 2,
														"second-value": "0.0002"
													}
												}
											],
											"actions": [
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 879613593990844,
													"parameters": {
														"object-to-create": "WaterTexture",
														"layer": "\"Water\"",
														"x": "x / DrawingCanvas.SnapshotWidth * DrawingCanvas.Width",
														"y": "y/ DrawingCanvas.SnapshotHeight* DrawingCanvas.Height",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												}
											],
											"sid": 149930028103918
										}
									]
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "load-snapshot",
									"objectClass": "DrawingCanvas",
									"sid": 657323731650731
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 316798622733594,
									"parameters": {
										"layer": "\"GameLoading\"",
										"visibility": "invisible"
									}
								},
								{
									"callFunction": "showTutorialPopUp",
									"sid": 975841525573511,
									"parameters": [
										true
									]
								}
							],
							"sid": 389094493669400
						}
					]
				},
				{
					"functionName": "showPopUp",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "show",
							"type": "boolean",
							"initialValue": "false",
							"comment": "",
							"sid": 874504248548342
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [],
					"sid": 120698090199920,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-boolean-eventvar",
									"objectClass": "System",
									"sid": 446557754758457,
									"parameters": {
										"variable": "show"
									}
								}
							],
							"actions": [
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 560978366560197,
									"parameters": {
										"layer": "\"Game\"",
										"interactive": false
									}
								},
								{
									"callFunction": "pauseGame",
									"sid": 987631234203885
								}
							],
							"sid": 781098177610516
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 123240425477636
								}
							],
							"actions": [
								{
									"id": "set-layer-interactive",
									"objectClass": "System",
									"sid": 335591136117425,
									"parameters": {
										"layer": "\"Game\"",
										"interactive": true
									}
								},
								{
									"callFunction": "resumeGame",
									"sid": 290915307126297
								}
							],
							"sid": 502821418606422
						}
					]
				}
			],
			"sid": 841929679503871
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "SliderBar",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 556447413316293
						},
						{
							"id": "for-each",
							"objectClass": "System",
							"sid": 694114928366839,
							"parameters": {
								"object": "Slider"
							}
						}
					],
					"actions": [
						{
							"callFunction": "SetupSliderBar",
							"sid": 336579489363680
						}
					],
					"sid": 148298126790286
				},
				{
					"functionName": "SetupSliderBar",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-x",
							"objectClass": "Slider",
							"sid": 325665271897354,
							"parameters": {
								"x": "Self.minX + Self.value/Self.maxValue * (Self.maxX - Self.minX)"
							}
						}
					],
					"sid": 926633172671623
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "is-dragging",
							"objectClass": "Slider",
							"sid": 549085912347025,
							"behaviorType": "DragDrop"
						},
						{
							"id": "is-boolean-instance-variable-set",
							"objectClass": "Slider",
							"sid": 690761503424306,
							"parameters": {
								"instance-variable": "isDraggable"
							}
						}
					],
					"actions": [
						{
							"id": "set-x",
							"objectClass": "Slider",
							"sid": 353087564943295,
							"parameters": {
								"x": "clamp(Self.X, Self.minX, Self.maxX)"
							}
						},
						{
							"id": "set-instvar-value",
							"objectClass": "Slider",
							"sid": 990965242958145,
							"parameters": {
								"instance-variable": "value",
								"value": "(Self.X - Self.minX) / (Self.maxX - Self.minX) * Self.maxValue"
							}
						},
						{
							"id": "log",
							"objectClass": "Browser",
							"sid": 232629445861220,
							"parameters": {
								"type": "log",
								"message": "\"slider drag\""
							}
						}
					],
					"sid": 561760919439549,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "UIText",
									"sid": 350961683626070,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "left(Slider.id, find(Slider.id, \"_slider\")) & \"_text\""
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "UIText",
									"sid": 931884532808299,
									"parameters": {
										"text": "Slider.value"
									}
								}
							],
							"sid": 554820079075309
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Slider",
									"sid": 438715582187568,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "left(Slider.id, find(Slider.id, \"_crisis_slider\")) & \"_crisis_slider\""
									}
								}
							],
							"actions": [
								{
									"type": "script",
									"script": "const slider = runtime.objects.Slider.getPickedInstances()[0];\nconst crisis = slider.instVars['id'].replace(\"_crisis_slider\", \"\");\nsetCrisisValue(crisis, slider.instVars['value']);\nupdateFSM();\nupdateStatusView(runtime);\nupdateCrisisView(runtime);"
								}
							],
							"sid": 276331711608241
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Slider",
									"sid": 964244485681498,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "left(Slider.id, find(Slider.id, \"_status_slider\")) & \"_status_slider\""
									}
								}
							],
							"actions": [
								{
									"type": "script",
									"script": "const slider = runtime.objects.Slider.getPickedInstances()[0];\nconst status = slider.instVars['id'].replace(\"_status_slider\", \"\");\nsetStatusValue(status, slider.instVars['value']);\nupdateStatusView(runtime);\nupdateCrisisView(runtime);"
								}
							],
							"sid": 888014597191443
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-instance-variable",
									"objectClass": "Slider",
									"sid": 905443505719866,
									"parameters": {
										"instance-variable": "id",
										"comparison": 0,
										"value": "\"policy_pop_up_slider\""
									}
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 915726380822507,
									"parameters": {
										"variable": "policyToSet",
										"comparison": 1,
										"value": "\"\""
									}
								}
							],
							"actions": [
								{
									"type": "script",
									"script": "const slider = runtime.objects.Slider.getPickedInstances()[0];\nconst policyName = runtime.globalVars.policyToSet;\n\nupdatePolicyFiscalView(policyName, slider);\nupdatePolicyEffectViews(policyName, slider.instVars['value']);"
								}
							],
							"sid": 215795582291721
						}
					]
				},
				{
					"functionName": "SetSliderValue",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": true,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "value",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 588559624522030
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-instvar-value",
							"objectClass": "Slider",
							"sid": 446400525777389,
							"parameters": {
								"instance-variable": "value",
								"value": "value"
							}
						},
						{
							"id": "set-x",
							"objectClass": "Slider",
							"sid": 558664767481393,
							"parameters": {
								"x": "Self.minX +clamp (value/Self.maxValue * (Self.maxValue - Self.minX), Self.minX, Self.maxX)"
							}
						}
					],
					"sid": 683034627595728
				}
			],
			"sid": 965283414062118
		},
		{
			"eventType": "group",
			"disabled": false,
			"title": "PanAndZoom",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "TouchPanID",
					"type": "number",
					"initialValue": "-1",
					"comment": "ID of the touch using to pan",
					"isStatic": true,
					"isConstant": false,
					"sid": 847770430872547
				},
				{
					"eventType": "variable",
					"name": "TouchZoomID",
					"type": "number",
					"initialValue": "-1",
					"comment": "ID of second touch using to zoom",
					"isStatic": true,
					"isConstant": false,
					"sid": 375008447792848
				},
				{
					"eventType": "variable",
					"name": "TouchLastX",
					"type": "number",
					"initialValue": "0",
					"comment": "Initial X position of touch (for pan)",
					"isStatic": true,
					"isConstant": false,
					"sid": 818522554016073
				},
				{
					"eventType": "variable",
					"name": "TouchLastY",
					"type": "number",
					"initialValue": "0",
					"comment": "Initial Y position of touch (for pan)",
					"isStatic": true,
					"isConstant": false,
					"sid": 649269021817605
				},
				{
					"eventType": "variable",
					"name": "TouchStartDistance",
					"type": "number",
					"initialValue": "0",
					"comment": "Initial distance apart of touches (for zoom)",
					"isStatic": true,
					"isConstant": false,
					"sid": 475661532190370
				},
				{
					"eventType": "variable",
					"name": "InitialScale",
					"type": "number",
					"initialValue": "0",
					"comment": "Initial scale of layout (for zoom)",
					"isStatic": true,
					"isConstant": false,
					"sid": 167598591005758
				},
				{
					"eventType": "variable",
					"name": "minScale",
					"type": "number",
					"initialValue": "0.5",
					"comment": "Minimal scale of layout (for zoom)",
					"isStatic": true,
					"isConstant": false,
					"sid": 446885965438125
				},
				{
					"eventType": "variable",
					"name": "MaxScale",
					"type": "number",
					"initialValue": "2",
					"comment": "Max scale of layout (for zoom)",
					"isStatic": true,
					"isConstant": false,
					"sid": 436018292601049
				},
				{
					"eventType": "variable",
					"name": "OriginalMidX",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 560574407287322
				},
				{
					"eventType": "variable",
					"name": "OriginalMidY",
					"type": "number",
					"initialValue": "0",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 522798260091149
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-start-of-layout",
							"objectClass": "System",
							"sid": 908927061275997
						}
					],
					"actions": [
						{
							"callFunction": "ResetPanAndZoomVariable",
							"sid": 453785640930928
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 642848690903123,
							"parameters": {
								"variable": "OriginalMidX",
								"value": "OriginalViewportWidth/2"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 481378808417419,
							"parameters": {
								"variable": "OriginalMidY",
								"value": "OriginalViewportHeight/2"
							}
						}
					],
					"sid": 877199261094477
				},
				{
					"functionName": "ResetPanAndZoomVariable",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 942596003316308,
							"parameters": {
								"variable": "TouchPanID",
								"value": "-1"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 684986291900936,
							"parameters": {
								"variable": "TouchZoomID",
								"value": "-1"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 125714987409208,
							"parameters": {
								"variable": "TouchLastX",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 822614027577445,
							"parameters": {
								"variable": "TouchLastY",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 208380175179235,
							"parameters": {
								"variable": "TouchStartDistance",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 108260954267387,
							"parameters": {
								"variable": "InitialScale",
								"value": "0"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 605051254668343,
							"parameters": {
								"variable": "minScale",
								"value": "max(0.5, ViewportWidth(\"UI\")/LayoutWidth, ViewportHeight(\"UI\")/LayoutHeight)"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 897009937683920,
							"parameters": {
								"variable": "MaxScale",
								"value": "2"
							}
						},
						{
							"callFunction": "SetZoom",
							"sid": 535455617928282,
							"parameters": [
								"1"
							]
						}
					],
					"sid": 874497800786334
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-touch-start",
							"objectClass": "Touch",
							"sid": 948242628149931
						},
						{
							"id": "is-touching-object",
							"objectClass": "Touch",
							"sid": 380951269209862,
							"parameters": {
								"object": "ScrollablePanel"
							},
							"isInverted": true
						},
						{
							"id": "is-touching-object",
							"objectClass": "Touch",
							"sid": 888177863551396,
							"parameters": {
								"object": "Button"
							},
							"isInverted": true
						},
						{
							"id": "is-touching-object",
							"objectClass": "Touch",
							"sid": 491795349568824,
							"parameters": {
								"object": "SliderBar"
							},
							"isInverted": true
						},
						{
							"id": "is-touching-object",
							"objectClass": "Touch",
							"sid": 750314655634088,
							"parameters": {
								"object": "UIPanel"
							},
							"isInverted": true
						},
						{
							"id": "layer-is-interactive",
							"objectClass": "System",
							"sid": 923364906958903,
							"parameters": {
								"layer": "\"Background\""
							}
						}
					],
					"actions": [],
					"sid": 645899763660258,
					"children": [
						{
							"eventType": "comment",
							"text": "If the user touches, and we're not already panning with a different touch, store the touch ID and the position of the touch. Note we get the position of the touch from a separate layer which has a parallax of 0, otherwise panning the view would alter the reported touch position, resulting in confusing feedback loops."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 225735926690867,
									"parameters": {
										"variable": "TouchPanID",
										"comparison": 0,
										"value": "-1"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 868081371958812,
									"parameters": {
										"variable": "TouchLastX",
										"value": "Touch.X(\"UI\")"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 933294924660855,
									"parameters": {
										"variable": "TouchLastY",
										"value": "Touch.Y(\"UI\")"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 323025813718126,
									"parameters": {
										"variable": "TouchPanID",
										"value": "Touch.TouchID"
									}
								}
							],
							"sid": 608860516354948
						},
						{
							"eventType": "comment",
							"text": "Otherwise if we're already panning with a touch, this must be a second touch. Use this second touch to zoom the display. We need to remember the starting distance apart of the touches, as well as the starting layout scale, in order to calculate the zoom. Also store the mid-point of the touches, so we can still pan while zooming."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 920426881047331
								},
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 350936035178478,
									"parameters": {
										"variable": "TouchZoomID",
										"comparison": 0,
										"value": "-1"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 186767715052026,
									"parameters": {
										"variable": "TouchZoomID",
										"value": "Touch.TouchID"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 235412057127580,
									"parameters": {
										"variable": "TouchStartDistance",
										"value": "distance(Touch.XForID(TouchPanID, \"UI\"), Touch.YForID(TouchPanID, \"UI\"), Touch.XForID(TouchZoomID, \"UI\"), Touch.YForID(TouchZoomID, \"UI\"))"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 286851135041898,
									"parameters": {
										"variable": "InitialScale",
										"value": "LayerScale(\"Game\")"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 499667633437596,
									"parameters": {
										"variable": "TouchLastX",
										"value": "(Touch.XForID(TouchPanID, \"UI\") + Touch.XForID(TouchZoomID, \"UI\")) / 2"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 633961251322358,
									"parameters": {
										"variable": "TouchLastY",
										"value": "(Touch.YForID(TouchPanID, \"UI\") + Touch.YForID(TouchZoomID, \"UI\")) / 2"
									}
								}
							],
							"sid": 385843051808539
						}
					]
				},
				{
					"eventType": "comment",
					"text": "While we have a touch to pan with, and we're not zooming, offset the scroll position by the change in position of the touch. This makes the view scroll with the touch. Note we also need to take in to account the layout scale to pan correctly at different zoom levels."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 432725776584723,
							"parameters": {
								"variable": "TouchPanID",
								"comparison": 1,
								"value": "-1"
							}
						},
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 436471069382575,
							"parameters": {
								"variable": "TouchZoomID",
								"comparison": 0,
								"value": "-1"
							}
						},
						{
							"id": "layer-is-visible",
							"objectClass": "System",
							"sid": 809465429997129,
							"parameters": {
								"layer": "\"PopUpBG\""
							},
							"isInverted": true
						},
						{
							"id": "layer-is-interactive",
							"objectClass": "System",
							"sid": 753239633799571,
							"parameters": {
								"layer": "\"Background\""
							}
						}
					],
					"actions": [
						{
							"id": "scroll-to-position",
							"objectClass": "System",
							"sid": 729693429735618,
							"parameters": {
								"x": "scrollx - (Touch.X(\"UI\") - TouchLastX) / LayerScale(\"Game\")",
								"y": "scrolly - (Touch.Y(\"UI\") - TouchLastY) / LayerScale(\"Game\")"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 207287904410808,
							"parameters": {
								"variable": "TouchLastX",
								"value": "Touch.X(\"UI\")"
							}
						},
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 557350256994108,
							"parameters": {
								"variable": "TouchLastY",
								"value": "Touch.Y(\"UI\")"
							}
						}
					],
					"sid": 726491219535623
				},
				{
					"eventType": "comment",
					"text": "If there is a second touch we're zooming with, adjust the layout scale based on the distance between the touches. Also calculate the new mid-point of the two touches and keep panning based on that."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-eventvar",
							"objectClass": "System",
							"sid": 889176553918667,
							"parameters": {
								"variable": "TouchZoomID",
								"comparison": 1,
								"value": "-1"
							}
						},
						{
							"id": "layer-is-visible",
							"objectClass": "System",
							"sid": 643023330004338,
							"parameters": {
								"layer": "\"PopUpBG\""
							},
							"isInverted": true
						},
						{
							"id": "layer-is-interactive",
							"objectClass": "System",
							"sid": 920056550868078,
							"parameters": {
								"layer": "\"Background\""
							}
						}
					],
					"actions": [],
					"sid": 414057524249245,
					"children": [
						{
							"eventType": "variable",
							"name": "TouchCurrentDistance",
							"type": "number",
							"initialValue": "0",
							"comment": "The current distance apart of the touches (for zoom)",
							"isStatic": false,
							"isConstant": false,
							"sid": 146101690161996
						},
						{
							"eventType": "variable",
							"name": "TouchCurrentMidX",
							"type": "number",
							"initialValue": "0",
							"comment": "The current average position of the touches for panning while zooming",
							"isStatic": false,
							"isConstant": false,
							"sid": 517980047109163
						},
						{
							"eventType": "variable",
							"name": "TouchCurrentMidY",
							"type": "number",
							"initialValue": "0",
							"comment": "The current average position of the touches for panning while zooming",
							"isStatic": false,
							"isConstant": false,
							"sid": 511667672614343
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 399968571453045,
									"parameters": {
										"variable": "TouchCurrentMidX",
										"value": "(Touch.XForID(TouchPanID, \"UI\") + Touch.XForID(TouchZoomID, \"UI\")) / 2"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 303108467310181,
									"parameters": {
										"variable": "TouchCurrentMidY",
										"value": "(Touch.YForID(TouchPanID, \"UI\") + Touch.YForID(TouchZoomID, \"UI\")) / 2"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 450278113827498,
									"parameters": {
										"variable": "TouchCurrentDistance",
										"value": "distance(Touch.XForID(TouchPanID, \"UI\"), Touch.YForID(TouchPanID, \"UI\"), Touch.XForID(TouchZoomID, \"UI\"), Touch.YForID(TouchZoomID, \"UI\"))"
									}
								},
								{
									"callFunction": "SetZoom",
									"sid": 865794024106431,
									"parameters": [
										"clamp(InitialScale * (TouchCurrentDistance / TouchStartDistance), minScale, MaxScale)"
									]
								},
								{
									"id": "scroll-to-position",
									"objectClass": "System",
									"sid": 290627961989307,
									"parameters": {
										"x": "scrollx - (TouchCurrentMidX - TouchLastX) / LayerScale(\"Game\")",
										"y": "scrolly - (TouchCurrentMidY - TouchLastY) / LayerScale(\"Game\")"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 673411679457478,
									"parameters": {
										"variable": "TouchLastX",
										"value": "TouchCurrentMidX"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 507956101169773,
									"parameters": {
										"variable": "TouchLastY",
										"value": "TouchCurrentMidY"
									}
								}
							],
							"sid": 471410742955809
						}
					]
				},
				{
					"eventType": "comment",
					"text": "When the touch we are panning or zooming with ends, reset the stored touch ID so we stop the action."
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-touch-end",
							"objectClass": "Touch",
							"sid": 779946030258185
						},
						{
							"id": "layer-is-interactive",
							"objectClass": "System",
							"sid": 194800978994816,
							"parameters": {
								"layer": "\"Background\""
							}
						}
					],
					"actions": [],
					"sid": 762786418752812,
					"children": [
						{
							"eventType": "comment",
							"text": "If we stop the first (panning) touch while zooming, make the second (zooming) touch become the new panning touch."
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 337405186256630,
									"parameters": {
										"variable": "TouchPanID",
										"comparison": 0,
										"value": "Touch.TouchID"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 448442496874338,
									"parameters": {
										"variable": "TouchPanID",
										"value": "-1"
									}
								}
							],
							"sid": 405034219054017,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-eventvar",
											"objectClass": "System",
											"sid": 783449641440581,
											"parameters": {
												"variable": "TouchZoomID",
												"comparison": 1,
												"value": "-1"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 394414080812405,
											"parameters": {
												"variable": "TouchPanID",
												"value": "TouchZoomID"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 127735200822004,
											"parameters": {
												"variable": "TouchZoomID",
												"value": "-1"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 340197096359176,
											"parameters": {
												"variable": "TouchLastX",
												"value": "Touch.XForID(TouchPanID, \"UI\")"
											}
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 611201731853713,
											"parameters": {
												"variable": "TouchLastY",
												"value": "Touch.YForID(TouchPanID, \"UI\")"
											}
										}
									],
									"sid": 229533911733090
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 536534015267765,
									"parameters": {
										"variable": "TouchZoomID",
										"comparison": 0,
										"value": "Touch.TouchID"
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 815912486472108,
									"parameters": {
										"variable": "TouchZoomID",
										"value": "-1"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 838720968803736,
									"parameters": {
										"variable": "TouchLastX",
										"value": "Touch.XForID(TouchPanID, \"UI\")"
									}
								},
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 847428447596757,
									"parameters": {
										"variable": "TouchLastY",
										"value": "Touch.YForID(TouchPanID, \"UI\")"
									}
								}
							],
							"sid": 256403407919483
						}
					]
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-mouse-wheel",
							"objectClass": "Mouse",
							"sid": 213413779135463,
							"parameters": {
								"direction": "up"
							}
						},
						{
							"id": "cursor-is-over-object",
							"objectClass": "Mouse",
							"sid": 274615449231098,
							"parameters": {
								"object": "ScrollablePanel"
							},
							"isInverted": true
						},
						{
							"id": "layer-is-interactive",
							"objectClass": "System",
							"sid": 811227993075199,
							"parameters": {
								"layer": "\"Background\""
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 947789698754161,
							"parameters": {
								"variable": "InitialScale",
								"value": "LayerScale(\"Game\")"
							}
						},
						{
							"callFunction": "SetZoom",
							"sid": 950498071804342,
							"parameters": [
								"clamp(InitialScale + 5 * dt, minScale, MaxScale)"
							]
						}
					],
					"sid": 929132937619628
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-mouse-wheel",
							"objectClass": "Mouse",
							"sid": 618203942493048,
							"parameters": {
								"direction": "down"
							}
						},
						{
							"id": "cursor-is-over-object",
							"objectClass": "Mouse",
							"sid": 140615167354153,
							"parameters": {
								"object": "ScrollablePanel"
							},
							"isInverted": true
						},
						{
							"id": "layer-is-interactive",
							"objectClass": "System",
							"sid": 313887339171486,
							"parameters": {
								"layer": "\"Background\""
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 822258754952508,
							"parameters": {
								"variable": "InitialScale",
								"value": "LayerScale(\"Game\")"
							}
						},
						{
							"callFunction": "SetZoom",
							"sid": 333373273158139,
							"parameters": [
								"clamp(InitialScale - 5 * dt, minScale, MaxScale)"
							]
						}
					],
					"sid": 151569849382764
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 164612208815745,
							"parameters": {
								"key": 187
							}
						},
						{
							"id": "layer-is-interactive",
							"objectClass": "System",
							"sid": 714186384766143,
							"parameters": {
								"layer": "\"Background\""
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 369330435431878,
							"parameters": {
								"variable": "InitialScale",
								"value": "LayerScale(\"Game\")"
							}
						},
						{
							"callFunction": "SetZoom",
							"sid": 482744136449196,
							"parameters": [
								"clamp(InitialScale + 1 * dt, minScale, MaxScale)"
							]
						}
					],
					"sid": 764410581766476
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "key-is-down",
							"objectClass": "Keyboard",
							"sid": 551470632488322,
							"parameters": {
								"key": 189
							}
						},
						{
							"id": "layer-is-interactive",
							"objectClass": "System",
							"sid": 948222915728178,
							"parameters": {
								"layer": "\"Background\""
							}
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 634546529825841,
							"parameters": {
								"variable": "InitialScale",
								"value": "LayerScale(\"Game\")"
							}
						},
						{
							"callFunction": "SetZoom",
							"sid": 912427819073514,
							"parameters": [
								"clamp(InitialScale - 1 * dt, minScale, MaxScale)"
							]
						}
					],
					"sid": 280921488245176
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "on-any-key-pressed",
							"objectClass": "Keyboard",
							"sid": 763048387485082
						},
						{
							"id": "layer-is-interactive",
							"objectClass": "System",
							"sid": 385841010793925,
							"parameters": {
								"layer": "\"Background\""
							}
						}
					],
					"actions": [],
					"sid": 153013074091223,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 927765590950701,
									"parameters": {
										"key": 87
									}
								},
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 304058056702056,
									"parameters": {
										"key": 38
									}
								}
							],
							"actions": [
								{
									"id": "scroll-to-y",
									"objectClass": "System",
									"sid": 791978454635374,
									"parameters": {
										"y": "scrolly - 400 * dt"
									}
								}
							],
							"sid": 525918967322759,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 944003985830704,
									"parameters": {
										"key": 83
									}
								},
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 489216342953180,
									"parameters": {
										"key": 40
									}
								}
							],
							"actions": [
								{
									"id": "scroll-to-y",
									"objectClass": "System",
									"sid": 246237605707907,
									"parameters": {
										"y": "scrolly + 400 * dt"
									}
								}
							],
							"sid": 718234045609336,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 961984882502025,
									"parameters": {
										"key": 65
									}
								},
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 884318964613975,
									"parameters": {
										"key": 37
									}
								}
							],
							"actions": [
								{
									"id": "scroll-to-x",
									"objectClass": "System",
									"sid": 602301922547165,
									"parameters": {
										"x": "scrollx  - 400 * dt"
									}
								}
							],
							"sid": 220719175011947,
							"isOrBlock": true
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 852596931026791,
									"parameters": {
										"key": 68
									}
								},
								{
									"id": "key-is-down",
									"objectClass": "Keyboard",
									"sid": 389182920216903,
									"parameters": {
										"key": 39
									}
								}
							],
							"actions": [
								{
									"id": "scroll-to-x",
									"objectClass": "System",
									"sid": 349092382402918,
									"parameters": {
										"x": "scrollx  + 400 * dt"
									}
								}
							],
							"sid": 720739914788859,
							"isOrBlock": true
						}
					]
				},
				{
					"functionName": "SetZoom",
					"functionDescription": "",
					"functionCategory": "",
					"functionReturnType": "none",
					"functionCopyPicked": false,
					"functionIsAsync": false,
					"functionParameters": [
						{
							"name": "zoom",
							"type": "number",
							"initialValue": "0",
							"comment": "",
							"sid": 999538527197956
						}
					],
					"eventType": "function-block",
					"conditions": [],
					"actions": [
						{
							"id": "set-layer-scale",
							"objectClass": "System",
							"sid": 324911134347002,
							"parameters": {
								"layer": "\"Game\"",
								"scale": "zoom"
							}
						},
						{
							"id": "set-layer-scale",
							"objectClass": "System",
							"sid": 248325514584526,
							"parameters": {
								"layer": "\"Background\"",
								"scale": "zoom"
							}
						},
						{
							"id": "set-layer-scale",
							"objectClass": "System",
							"sid": 599874174239469,
							"parameters": {
								"layer": "\"Water\"",
								"scale": "zoom"
							}
						},
						{
							"id": "set-layer-scale",
							"objectClass": "System",
							"sid": 392735451772250,
							"parameters": {
								"layer": "\"Tilemap\"",
								"scale": "zoom"
							}
						},
						{
							"id": "set-layer-scale",
							"objectClass": "System",
							"sid": 451359460706017,
							"parameters": {
								"layer": "\"Crisis\"",
								"scale": "zoom"
							}
						},
						{
							"id": "set-layer-scale",
							"objectClass": "System",
							"sid": 246251216903190,
							"parameters": {
								"layer": "\"Biome\"",
								"scale": "zoom"
							}
						},
						{
							"id": "set-layer-scale",
							"objectClass": "System",
							"sid": 968820191536516,
							"parameters": {
								"layer": "\"Grid\"",
								"scale": "zoom"
							}
						}
					],
					"sid": 315404677249910
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 801011244738645,
							"parameters": {
								"first-value": "scrollx",
								"comparison": 2,
								"second-value": "OriginalMidX / LayerScale(\"Game\")"
							}
						}
					],
					"actions": [
						{
							"id": "scroll-to-x",
							"objectClass": "System",
							"sid": 920801545651329,
							"parameters": {
								"x": "OriginalMidX / LayerScale(\"Game\")"
							}
						}
					],
					"sid": 381463664521515
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 160982889626453,
							"parameters": {
								"first-value": "scrollx",
								"comparison": 4,
								"second-value": "LayoutWidth - OriginalMidX / LayerScale(\"Game\")"
							}
						}
					],
					"actions": [
						{
							"id": "scroll-to-x",
							"objectClass": "System",
							"sid": 891415809329646,
							"parameters": {
								"x": "LayoutWidth - OriginalMidX / LayerScale(\"Game\")"
							}
						}
					],
					"sid": 351771419155922
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 240072875685435,
							"parameters": {
								"first-value": "scrolly",
								"comparison": 2,
								"second-value": "OriginalMidY / LayerScale(\"Game\")"
							}
						}
					],
					"actions": [
						{
							"id": "scroll-to-y",
							"objectClass": "System",
							"sid": 401076620604681,
							"parameters": {
								"y": "OriginalMidY / LayerScale(\"Game\")"
							}
						}
					],
					"sid": 272824226784717
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 971163578553174,
							"parameters": {
								"first-value": "scrolly",
								"comparison": 4,
								"second-value": "LayoutHeight - OriginalMidY / LayerScale(\"Game\")"
							}
						}
					],
					"actions": [
						{
							"id": "scroll-to-y",
							"objectClass": "System",
							"sid": 848545281007413,
							"parameters": {
								"y": "LayoutHeight - OriginalMidY / LayerScale(\"Game\")"
							}
						}
					],
					"sid": 493995636528069
				}
			],
			"sid": 931418544199270
		}
	],
	"sid": 260114432359631
}